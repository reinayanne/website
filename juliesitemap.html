<!DOCTYPE html>
<html lang="en">
<head>

<!-- FAVICON -->
<link rel="icon" type="image/png" sizes="64x64" href="adminfavicon.ico">

<!-- FONT -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&display=swap" rel="stylesheet">

<!-- ICONS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Admin Sitemap</title>

<style>

/* =========================
CORE THEME VARIABLES + RESET
========================= */
:root{
 --pink:#ff4fa3;
 --pink-light:#ff7bbf;
 --pink-dark:#c81e6d;
 --pink-soft:#ffc2df;
 --glass-bg:rgba(255,123,191,.18);
 --text-main:#ffffff;
 --badge-bg:#ff1744;
}

*{
 margin:0;
 padding:0;
 box-sizing:border-box;
 -webkit-tap-highlight-color:transparent;
}

/* =========================
BODY
========================= */
body{
 font-family:'Orbitron', sans-serif;
 background:url("adminbackground.png") center/cover fixed no-repeat;
 color:var(--text-main);
 min-height:100vh;
 overflow-x:hidden;
}

/* =========================
SCROLLBAR
========================= */
::-webkit-scrollbar{width:8px}
::-webkit-scrollbar-track{
 background:rgba(255,192,223,.35);
 border-radius:10px;
}
::-webkit-scrollbar-thumb{
 background:linear-gradient(180deg,var(--pink-light),var(--pink),var(--pink-dark));
 border-radius:10px;
 border:2px solid rgba(255,255,255,.4);
}
::-webkit-scrollbar-thumb:hover{
 background:linear-gradient(180deg,var(--pink),var(--pink-dark));
}
*{
 scrollbar-width:thin;
 scrollbar-color:var(--pink) rgba(255,192,223,.4);
}

/* =========================
LOADER (UPDATED + CENTERED)
========================= */
#loader{
 position:fixed;
 inset:0;
 background:var(--pink-light);
 display:grid;
 place-items:center;
 z-index:9999;
 transition:.4s ease;
}
#loader.fade-out{
 opacity:0;
 visibility:hidden;
}
.loader-content{
 display:flex;
 flex-direction:column;
 align-items:center;
 justify-content:center;
 text-align:center;
 padding:20px;
}
.loader-content img{
 width:100px;
 height:auto;
 display:block;
 margin:0 auto 15px auto;
}
.arc-spinner{
 width:50px;
 height:50px;
 border:5px solid rgba(255,255,255,.3);
 border-top:5px solid white;
 border-radius:50%;
 animation:spin 1s linear infinite;
}
@keyframes spin{
 to{transform:rotate(360deg);}
}

/* =========================
HEADER
========================= */
header{
 display:flex;
 justify-content:space-between;
 align-items:center;
 padding:15px 20px;
 backdrop-filter:blur(20px);
 background:var(--glass-bg);
 position:sticky;
 top:0;
 z-index:100;
 flex-wrap:wrap;
 gap:10px;
}
header img{
 height:50px;
 width:auto;
}
.header-icons{
 display:flex;
 align-items:center;
 gap:15px;
 flex-wrap:wrap;
}
.header-icons a{
 position:relative;
 color:white;
 font-size:20px;
 cursor:pointer;
 text-decoration:none;
 transition:transform 0.3s;
 display:flex;
 align-items:center;
 justify-content:center;
 width:40px;
 height:40px;
 border-radius:50%;
}
.header-icons a:hover{
 transform:scale(1.1);
 background:rgba(255,255,255,0.1);
}

/* NOTIFICATION BADGE */
.notification-badge{
 position:absolute;
 top:-5px;
 right:-5px;
 background:var(--badge-bg);
 color:white;
 font-size:10px;
 font-weight:bold;
 width:20px;
 height:20px;
 border-radius:50%;
 display:flex;
 align-items:center;
 justify-content:center;
 border:2px solid var(--pink-light);
 animation:pulse 2s infinite;
 display:none;
}
.notification-badge.show{
 display:flex;
}
@keyframes pulse{
 0%,100%{transform:scale(1);}
 50%{transform:scale(1.1);}
}

/* =========================
GLASS CONTAINER
========================= */
.container{
 margin:20px auto;
 width:95%;
 max-width:1200px;
 backdrop-filter:blur(25px);
 background:var(--glass-bg);
 padding:25px;
 border-radius:20px;
 min-height:calc(100vh - 140px);
}

/* =========================
SITEMAP GRID - FIXED LAYOUT
========================= */
.sitemap-grid{
 display:grid;
 grid-template-columns:repeat(4, 1fr);
 gap:15px;
 width:100%;
}
.sitemap-card{
 padding:20px 15px;
 border-radius:15px;
 background:rgba(255,255,255,.08);
 backdrop-filter:blur(15px);
 text-align:center;
 transition:all 0.35s ease;
 cursor:pointer;
 text-decoration:none;
 color:white;
 border:1px solid rgba(255,255,255,0.1);
 display:flex;
 flex-direction:column;
 align-items:center;
 justify-content:center;
 min-height:120px;
 width:100%;
}
.sitemap-card i{
 font-size:28px;
 margin-bottom:10px;
 display:block;
}
.sitemap-card span{
 font-size:12px;
 font-weight:500;
 line-height:1.3;
 word-break:break-word;
}
.sitemap-card:hover, .sitemap-card:active{
 background:white;
 color:var(--pink);
 transform:translateY(-4px) scale(1.02);
 box-shadow:0 10px 30px rgba(255,79,163,0.3);
}

/* =========================
NOTIFICATION PANEL
========================= */
.notification-panel{
 position:fixed;
 top:80px;
 right:20px;
 width:320px;
 max-width:90vw;
 max-height:400px;
 background:rgba(20,20,30,0.95);
 backdrop-filter:blur(20px);
 border-radius:15px;
 border:1px solid var(--pink-light);
 padding:15px;
 z-index:1000;
 transform:translateX(400px);
 transition:transform 0.3s ease;
 overflow-y:auto;
}
.notification-panel.show{
 transform:translateX(0);
}
.notification-header{
 display:flex;
 justify-content:space-between;
 align-items:center;
 margin-bottom:15px;
 padding-bottom:10px;
 border-bottom:1px solid rgba(255,255,255,0.1);
}
.notification-header h3{
 font-size:14px;
 color:var(--pink-light);
}
.clear-all-btn{
 background:var(--pink);
 border:none;
 color:white;
 padding:5px 12px;
 border-radius:20px;
 cursor:pointer;
 font-size:11px;
 font-family:'Orbitron', sans-serif;
 transition:all 0.3s;
}
.clear-all-btn:hover{
 background:var(--pink-dark);
 transform:scale(1.05);
}
.notification-item{
 background:rgba(255,255,255,0.05);
 border-radius:10px;
 padding:12px;
 margin-bottom:10px;
 display:flex;
 align-items:flex-start;
 gap:10px;
 animation:slideIn 0.3s ease;
 border-left:3px solid var(--pink);
}
@keyframes slideIn{
 from{opacity:0;transform:translateX(20px);}
 to{opacity:1;transform:translateX(0);}
}
.notification-item i{
 color:var(--pink-light);
 font-size:16px;
 margin-top:2px;
}
.notification-content{
 flex:1;
}
.notification-content p{
 font-size:12px;
 margin-bottom:5px;
 line-height:1.4;
}
.notification-time{
 font-size:10px;
 color:rgba(255,255,255,0.6);
}
.delete-notification{
 background:none;
 border:none;
 color:rgba(255,255,255,0.5);
 cursor:pointer;
 padding:5px;
 transition:color 0.3s;
}
.delete-notification:hover{
 color:var(--pink);
}
.empty-state{
 text-align:center;
 padding:30px;
 color:rgba(255,255,255,0.5);
 font-size:12px;
}
.notification-toggle{
 position:relative;
}

/* =========================
SCROLL BUTTON
========================= */
#scrollBtn{
 position:fixed;
 right:15px;
 bottom:15px;
 background:var(--pink);
 padding:12px 15px;
 border-radius:50%;
 cursor:pointer;
 opacity:0;
 transition:all 0.3s;
 border:none;
 color:white;
 font-size:16px;
 z-index:99;
 box-shadow:0 4px 15px rgba(255,79,163,0.4);
}
#scrollBtn.show{
 opacity:1;
}
#scrollBtn:hover, #scrollBtn:active{
 background:var(--pink-dark);
 transform:scale(1.1);
}

/* =========================
RESPONSIVE BREAKPOINTS
========================= */
/* Large screens - 4 columns */
@media screen and (min-width:1024px){
 .sitemap-grid{
  grid-template-columns:repeat(4, 1fr);
 }
}

/* Tablets - 3 columns */
@media screen and (max-width:1023px) and (min-width:768px){
 .sitemap-grid{
  grid-template-columns:repeat(3, 1fr);
 }
 .sitemap-card{
  min-height:110px;
  padding:18px 12px;
 }
 .sitemap-card i{
  font-size:26px;
 }
}

/* Mobile landscape - 2 columns */
@media screen and (max-width:767px){
 header{
  padding:12px 15px;
 }
 header img{
  height:40px;
 }
 .header-icons a{
  font-size:18px;
  width:35px;
  height:35px;
 }
 .container{
  width:98%;
  margin:10px auto;
  padding:20px 15px;
  border-radius:15px;
 }
 h1{
  font-size:1.5rem;
  margin-bottom:25px !important;
  text-align:center;
 }
 .sitemap-grid{
  grid-template-columns:repeat(2, 1fr);
  gap:12px;
 }
 .sitemap-card{
  padding:18px 10px;
  min-height:110px;
  border-radius:12px;
 }
 .sitemap-card i{
  font-size:24px;
  margin-bottom:8px;
 }
 .sitemap-card span{
  font-size:11px;
 }
 .notification-panel{
  top:70px;
  right:10px;
  left:10px;
  width:auto;
  max-height:60vh;
 }
}

/* Small mobile - 2 columns smaller */
@media screen and (max-width:480px){
 .sitemap-grid{
  grid-template-columns:repeat(2, 1fr);
  gap:10px;
 }
 .sitemap-card{
  padding:15px 8px;
  min-height:100px;
  border-radius:12px;
 }
 .sitemap-card i{
  font-size:22px;
  margin-bottom:8px;
 }
 .sitemap-card span{
  font-size:10px;
 }
}

/* =========================
TOAST NOTIFICATION
========================= */
.toast{
 position:fixed;
 bottom:80px;
 left:50%;
 transform:translateX(-50%) translateY(100px);
 background:var(--pink);
 color:white;
 padding:12px 25px;
 border-radius:25px;
 font-size:13px;
 z-index:1001;
 opacity:0;
 transition:all 0.3s ease;
 box-shadow:0 5px 20px rgba(255,79,163,0.4);
}
.toast.show{
 opacity:1;
 transform:translateX(-50%) translateY(0);
}

/* =========================
OFFLINE INDICATOR
========================= */
.offline-indicator{
 position:fixed;
 top:0;
 left:0;
 right:0;
 background:#ff6b6b;
 color:white;
 text-align:center;
 padding:8px;
 font-size:12px;
 z-index:10000;
 transform:translateY(-100%);
 transition:transform 0.3s;
}
.offline-indicator.show{
 transform:translateY(0);
}

</style>
</head>

<body>

<!-- OFFLINE INDICATOR -->
<div class="offline-indicator" id="offlineIndicator">
 <i class="fas fa-wifi-slash"></i> You are offline. Data will sync when connection is restored.
</div>

<!-- LOADER -->
<div id="loader">
 <div class="loader-content">
  <img src="adminlogo.png" alt="Logo">
  <div class="arc-spinner"></div>
 </div>
</div>

<!-- AUDIO -->
<audio id="bgMusic" src="coffee.mp3" loop></audio>
<audio id="notifSound" src="notification.mp3" preload="auto"></audio>

<!-- HEADER -->
<header>
 <div>
  <a href="homepage.html"><img src="adminlogo.png" alt="Logo"></a>
 </div>
 <div class="header-icons">
  <a href="homepage.html" id="homeBtn">
   <i class="fas fa-house"></i>
   <span class="notification-badge" id="homeBadge">0</span>
  </a>
  <a id="musicToggle"><i class="fas fa-music"></i></a>
  <a class="notification-toggle" id="notifToggle">
   <i class="fas fa-bell"></i>
   <span class="notification-badge" id="notifBadge">0</span>
  </a>
  <a id="logoutBtn"><i class="fas fa-right-from-bracket"></i></a>
 </div>
</header>

<!-- NOTIFICATION PANEL -->
<div class="notification-panel" id="notifPanel">
 <div class="notification-header">
  <h3><i class="fas fa-bell"></i> Notifications</h3>
  <button class="clear-all-btn" onclick="clearAllNotifications()">Clear All</button>
 </div>
 <div id="notifList">
  <div class="empty-state">No notifications yet</div>
 </div>
</div>

<!-- CONTENT -->
<div class="container">

<h1 style="margin-bottom:40px; font-size: clamp(1.5rem, 4vw, 2.5rem);">Admin Site Map</h1>

<div class="sitemap-grid">

<a href="calendar.html" class="sitemap-card" data-track="calendar">
 <i class="fas fa-calendar"></i>
 <span>Calendar</span>
</a>
<a href="birthdaytracker.html" class="sitemap-card" data-track="birthday">
 <i class="fas fa-cake-candles"></i>
 <span>Birthday Tracker</span>
</a>
<a href="routinetracker.html" class="sitemap-card" data-track="routine">
 <i class="fas fa-clock"></i>
 <span>Routine Tracker</span>
</a>
<a href="fitnesstracker.html" class="sitemap-card" data-track="fitness">
 <i class="fas fa-dumbbell"></i>
 <span>Fitness Tracker</span>
</a>
<a href="contactdetails.html" class="sitemap-card" data-track="contacts">
 <i class="fas fa-address-book"></i>
 <span>Contact Details</span>
</a>
<a href="budgettracker.html" class="sitemap-card" data-track="budget">
 <i class="fas fa-wallet"></i>
 <span>Budget Tracker</span>
</a>
<a href="grocery.html" class="sitemap-card" data-track="grocery">
 <i class="fas fa-shopping-cart"></i>
 <span>Grocery List</span>
</a>
<a href="worldtravel.html" class="sitemap-card" data-track="travel">
 <i class="fas fa-earth-asia"></i>
 <span>World Travel Map</span>
</a>
<a href="charity.html" class="sitemap-card" data-track="charity">
 <i class="fas fa-hand-holding-heart"></i>
 <span>Charity</span>
</a>
<a href="language.html" class="sitemap-card" data-track="language">
 <i class="fas fa-language"></i>
 <span>Learn New Language</span>
</a>
<a href="dream.html" class="sitemap-card" data-track="dream">
 <i class="fas fa-cloud-moon"></i>
 <span>Dream Goals</span>
</a>
<a href="giftlist.html" class="sitemap-card" data-track="gifts">
 <i class="fas fa-gift"></i>
 <span>Gift List</span>
</a>

</div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- SCROLL BUTTON -->
<button id="scrollBtn"><i class="fas fa-arrow-up"></i></button>

<script>

// =========================
// DATA MANAGEMENT SYSTEM
// =========================
const DataManager = {
 // Initialize storage keys
 keys: {
  notifications: 'admin_notifications',
  userData: 'admin_user_data',
  appState: 'admin_app_state',
  lastSync: 'admin_last_sync'
 },
 
 // Save data to localStorage
 save(key, data) {
  try {
   localStorage.setItem(this.keys[key] || key, JSON.stringify(data));
   this.updateLastSync();
   return true;
  } catch (e) {
   console.error('Save failed:', e);
   return false;
  }
 },
 
 // Load data from localStorage
 load(key, defaultValue = null) {
  try {
   const item = localStorage.getItem(this.keys[key] || key);
   return item ? JSON.parse(item) : defaultValue;
  } catch (e) {
   console.error('Load failed:', e);
   return defaultValue;
  }
 },
 
 // Remove specific data
 remove(key) {
  localStorage.removeItem(this.keys[key] || key);
 },
 
 // Clear all app data
 clearAll() {
  Object.values(this.keys).forEach(key => localStorage.removeItem(key));
 },
 
 // Update last sync timestamp
 updateLastSync() {
  localStorage.setItem(this.keys.lastSync, Date.now().toString());
 },
 
 // Get time since last sync
 getLastSync() {
  const sync = localStorage.getItem(this.keys.lastSync);
  return sync ? parseInt(sync) : null;
 }
};

// =========================
// NOTIFICATION SYSTEM
// =========================
const NotificationSystem = {
 notifications: [],
 unreadCount: 0,
 soundEnabled: true,
 
 init() {
  // Load saved notifications
  this.notifications = DataManager.load('notifications', []);
  this.calculateUnread();
  this.render();
  this.updateBadges();
  
  // Request notification permission
  if ('Notification' in window) {
   Notification.requestPermission();
  }
 },
 
 add(title, message, type = 'info', sound = true) {
  const notification = {
   id: Date.now() + Math.random().toString(36).substr(2, 9),
   title,
   message,
   type,
   timestamp: Date.now(),
   read: false,
   icon: this.getIcon(type)
  };
  
  this.notifications.unshift(notification);
  
  // Keep only last 50 notifications
  if (this.notifications.length > 50) {
   this.notifications = this.notifications.slice(0, 50);
  }
  
  this.save();
  this.calculateUnread();
  this.render();
  this.updateBadges();
  
  // Play sound
  if (sound && this.soundEnabled) {
   this.playSound();
  }
  
  // Show browser notification if permitted
  this.showBrowserNotification(title, message);
  
  // Show toast
  showToast(`ðŸ”” ${title}: ${message}`);
  
  return notification;
 },
 
 remove(id) {
  this.notifications = this.notifications.filter(n => n.id !== id);
  this.save();
  this.calculateUnread();
  this.render();
  this.updateBadges();
 },
 
 markAsRead(id) {
  const notif = this.notifications.find(n => n.id === id);
  if (notif) {
   notif.read = true;
   this.save();
   this.calculateUnread();
   this.updateBadges();
  }
 },
 
 markAllAsRead() {
  this.notifications.forEach(n => n.read = true);
  this.save();
  this.calculateUnread();
  this.updateBadges();
 },
 
 clearAll() {
  this.notifications = [];
  this.unreadCount = 0;
  this.save();
  this.render();
  this.updateBadges();
 },
 
 calculateUnread() {
  this.unreadCount = this.notifications.filter(n => !n.read).length;
 },
 
 save() {
  DataManager.save('notifications', this.notifications);
 },
 
 render() {
  const list = document.getElementById('notifList');
  
  if (this.notifications.length === 0) {
   list.innerHTML = '<div class="empty-state"><i class="fas fa-bell-slash" style="font-size:24px; margin-bottom:10px; display:block;"></i>No notifications yet</div>';
   return;
  }
  
  list.innerHTML = this.notifications.map(n => `
   <div class="notification-item" data-id="${n.id}">
    <i class="${n.icon}"></i>
    <div class="notification-content">
     <p style="${n.read ? 'opacity:0.7;' : 'font-weight:bold;'}">${n.message}</p>
     <div class="notification-time">${this.formatTime(n.timestamp)} ${n.read ? 'â€¢ Read' : 'â€¢ New'}</div>
    </div>
    <button class="delete-notification" onclick="NotificationSystem.remove('${n.id}')" title="Delete">
     <i class="fas fa-times"></i>
    </button>
   </div>
  `).join('');
 },
 
 updateBadges() {
  const homeBadge = document.getElementById('homeBadge');
  const notifBadge = document.getElementById('notifBadge');
  
  // Update home badge
  if (this.unreadCount > 0) {
   homeBadge.textContent = this.unreadCount > 99 ? '99+' : this.unreadCount;
   homeBadge.classList.add('show');
  } else {
   homeBadge.classList.remove('show');
  }
  
  // Update notification bell badge
  if (this.unreadCount > 0) {
   notifBadge.textContent = this.unreadCount > 99 ? '99+' : this.unreadCount;
   notifBadge.classList.add('show');
  } else {
   notifBadge.classList.remove('show');
  }
 },
 
 playSound() {
  const sound = document.getElementById('notifSound');
  if (sound) {
   sound.currentTime = 0;
   sound.volume = 0.6;
   sound.play().catch(e => console.log('Sound play failed:', e));
  }
 },
 
 showBrowserNotification(title, body) {
  if ('Notification' in window && Notification.permission === 'granted') {
   new Notification(title, {
    body,
    icon: 'adminfavicon.ico',
    badge: 'adminfavicon.ico',
    tag: 'admin-notification'
   });
  }
 },
 
 getIcon(type) {
  const icons = {
   info: 'fas fa-info-circle',
   success: 'fas fa-check-circle',
   warning: 'fas fa-exclamation-triangle',
   error: 'fas fa-times-circle',
   calendar: 'fas fa-calendar',
   birthday: 'fas fa-cake-candles',
   routine: 'fas fa-clock',
   fitness: 'fas fa-dumbbell',
   budget: 'fas fa-wallet',
   grocery: 'fas fa-shopping-cart'
  };
  return icons[type] || 'fas fa-bell';
 },
 
 formatTime(timestamp) {
  const date = new Date(timestamp);
  const now = new Date();
  const diff = now - date;
  
  if (diff < 60000) return 'Just now';
  if (diff < 3600000) return Math.floor(diff / 60000) + 'm ago';
  if (diff < 86400000) return Math.floor(diff / 3600000) + 'h ago';
  return date.toLocaleDateString();
 },
 
 togglePanel() {
  const panel = document.getElementById('notifPanel');
  panel.classList.toggle('show');
  if (panel.classList.contains('show')) {
   this.markAllAsRead();
  }
 }
};

// =========================
// UTILITY FUNCTIONS
// =========================
function showToast(message) {
 const toast = document.getElementById('toast');
 toast.textContent = message;
 toast.classList.add('show');
 setTimeout(() => toast.classList.remove('show'), 3000);
}

function clearAllNotifications() {
 if (confirm('Clear all notifications?')) {
  NotificationSystem.clearAll();
 }
}

// =========================
// EVENT LISTENERS
// =========================
const loader = document.getElementById("loader");
const musicToggle = document.getElementById("musicToggle");
const bgMusic = document.getElementById("bgMusic");
const scrollBtn = document.getElementById("scrollBtn");
const notifToggle = document.getElementById("notifToggle");
const logoutBtn = document.getElementById("logoutBtn");

// Page load
window.addEventListener("load", () => {
 // Initialize notification system
 NotificationSystem.init();
 
 // Simulate loading
 setTimeout(() => {
  loader.classList.add("fade-out");
  // Check for saved music state
  const musicState = DataManager.load('appState', {});
  if (musicState.musicPlaying) {
   bgMusic.volume = 0.6;
   bgMusic.play().then(() => {
    musicToggle.innerHTML = '<i class="fas fa-pause"></i>';
   }).catch(() => {});
  }
 }, 500);
});

// Music toggle
musicToggle.onclick = () => {
 if (bgMusic.paused) {
  bgMusic.volume = 0.6;
  bgMusic.play();
  musicToggle.innerHTML = '<i class="fas fa-pause"></i>';
  DataManager.save('appState', { musicPlaying: true });
 } else {
  bgMusic.pause();
  musicToggle.innerHTML = '<i class="fas fa-music"></i>';
  DataManager.save('appState', { musicPlaying: false });
 }
};

// Notification toggle
notifToggle.onclick = (e) => {
 e.stopPropagation();
 NotificationSystem.togglePanel();
};

// Close notification panel when clicking outside
document.addEventListener('click', (e) => {
 const panel = document.getElementById('notifPanel');
 const toggle = document.getElementById('notifToggle');
 if (panel.classList.contains('show') && !panel.contains(e.target) && !toggle.contains(e.target)) {
  panel.classList.remove('show');
 }
});

// Scroll button
window.addEventListener("scroll", () => {
 const nearBottom = window.innerHeight + window.scrollY >= document.body.offsetHeight - 120;
 scrollBtn.classList.toggle("show", nearBottom);
});

scrollBtn.onclick = () => {
 window.scrollTo({ top: 0, behavior: "smooth" });
};

// Logout
logoutBtn.onclick = () => {
 if (confirm('Are you sure you want to logout?')) {
  if (!bgMusic.paused) bgMusic.pause();
  DataManager.clearAll();
  window.location.href = "index.html";
 }
};

// Offline/Online detection
window.addEventListener('online', () => {
 document.getElementById('offlineIndicator').classList.remove('show');
 showToast('Back online! Syncing data...');
});

window.addEventListener('offline', () => {
 document.getElementById('offlineIndicator').classList.add('show');
});

// Visibility change (tab switch)
document.addEventListener('visibilitychange', () => {
 if (!document.hidden) {
  NotificationSystem.render();
  NotificationSystem.updateBadges();
 }
});

// Before unload - save state
window.addEventListener('beforeunload', () => {
 DataManager.save('appState', {
  musicPlaying: !bgMusic.paused,
  lastPage: 'sitemap',
  timestamp: Date.now()
 });
});

// =========================
// REAL-TIME SYNC SIMULATION
// =========================
setInterval(() => {
 // Simulate checking for new data from other pages
 const lastSync = DataManager.getLastSync();
 const now = Date.now();
 
 // If significant time passed, check for updates
 if (lastSync && (now - lastSync > 30000)) {
  // This would typically check a server or broadcast channel
  // For now, we just ensure UI is in sync with storage
  NotificationSystem.notifications = DataManager.load('notifications', []);
  NotificationSystem.calculateUnread();
  NotificationSystem.updateBadges();
 }
}, 10000); // Check every 10 seconds

// =========================
// EXAMPLE: Add test notification (remove in production)
// =========================
// Uncomment to test:
// setTimeout(() => {
//  NotificationSystem.add('Welcome!', 'Admin panel loaded successfully', 'success');
// }, 2000);

</script>

</body>
</html>