<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Manager Julie | Budget Grocery List</title>

<link rel="icon" type="image/png" sizes="64x64" href="adminfavicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root{
  --pink:#ff4fa3;
  --pink-light:#ff7bbf;
  --pink-dark:#d63384;
  --glass-bg:rgba(255,123,191,.18);
  --glass-border:rgba(255,255,255,.25);
  --text-main:#ffffff;
  --shadow-glow:0 8px 32px rgba(255,79,163,.3);
  --success-green:#2ecc71;
  --warning-orange:#f39c12;
  --danger-red:#e74c3c;
  --budget-blue:#3498db;
  --money-gold:#f1c40f;
}

*{margin:0;padding:0;box-sizing:border-box; -webkit-tap-highlight-color: transparent;}

body{
  font-family:'Inter',-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  background: linear-gradient(135deg, #2b1055, #7597de); /* Fallback if image fails */
  background-size: cover;
  color:var(--text-main);
  min-height:100vh;
  padding-bottom:120px; /* Space for fixed footer/bulk actions */
  overflow-x: hidden;
}

a{text-decoration:none;color:inherit;}

/* SCROLLBAR */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:rgba(255,79,163,.15)}
::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg,#ff4fa3,#ff7bbf);
  border-radius:10px;
}

/* LOADER */
#loader{
  position:fixed;
  inset:0;
  background:var(--pink-light);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
  transition:.4s ease;
}
#loader.fade-out{opacity:0;visibility:hidden}

.loader-content{
  display:flex;
  flex-direction:column;
  align-items:center;
}
.loader-content img{width:120px;margin-bottom:18px}

.arc-spinner{
  width:38px;height:38px;border-radius:50%;
  border:4px solid rgba(255,255,255,.25);
  border-top-color:#fff;
  border-left-color:transparent;
  border-bottom-color:transparent;
  animation:spin .65s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* HEADER */
header{
  position:sticky;top:0;z-index:1000;
  display:flex;justify-content:space-between;align-items:center;
  padding:12px 16px;
  backdrop-filter:blur(18px);
  background:linear-gradient(270deg,#ff4fa3,#ff7bbf,#ffb3d9);
  background-size:400% 400%;
  animation:flow 12s ease infinite;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
}
@keyframes flow{
  0%{background-position:0%}
  50%{background-position:100%}
  100%{background-position:0%}
}

.header-left{
  display:flex;
  align-items:center;
  gap:10px;
}
.header-left img{height:36px}

/* MOTTO */
.motto{
  font-size:14px;
  font-weight:600;
  font-style:italic;
  letter-spacing:.6px;
  display:flex;
  align-items:center;
  gap:8px;
  white-space:nowrap;
  text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}
.motto i{ opacity:.95; font-size:14px; }

/* ICONS */
.header-icons{display:flex;align-items:center; gap: 5px;}

.header-icons a{
  width:40px;height:40px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:12px;
  transition:.3s;
  position:relative;
  font-size: 18px;
}

.header-icons a:hover{ background: rgba(255,255,255,0.2); }

/* Notification Badge */
.notification-badge {
  position: absolute;
  top: 5px;
  right: 5px;
  width: 12px;
  height: 12px;
  background-color: var(--danger-red);
  border-radius: 50%;
  border: 2px solid var(--pink-light);
  display: none; /* Hidden by default */
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
  70% { transform: scale(1); box-shadow: 0 0 0 6px rgba(231, 76, 60, 0); }
  100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
}

/* MAIN CONTENT */
main{
  max-width:800px;
  margin:0 auto;
  padding:20px 15px;
}

/* PAGE HEADER */
.page-header{
  text-align:center;
  margin-bottom:25px;
}

.page-header h1{
  font-family:'Orbitron',sans-serif;
  font-size:clamp(1.5rem,5vw,2.2rem);
  font-weight:900;
  margin-bottom:8px;
  text-shadow:0 4px 20px rgba(255,79,163,.5);
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
}

.page-header p{
  opacity:.9;
  font-size:0.95rem;
}

/* BUDGET SECTION */
.budget-section{
  background:linear-gradient(135deg, rgba(52,152,219,.2), rgba(241,196,15,.15));
  backdrop-filter:blur(10px);
  border:1px solid rgba(255,255,255,.3);
  border-radius:16px;
  padding:20px;
  margin-bottom:20px;
  box-shadow:var(--shadow-glow);
}

.budget-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:15px;
  flex-wrap:wrap;
  gap:10px;
}

.budget-title{
  font-family:'Orbitron',sans-serif;
  font-size:1.1rem;
  display:flex;
  align-items:center;
  gap:8px;
}

.budget-input-group{
  display:flex;
  align-items:center;
  gap:8px;
  width: 100%;
  margin-top: 5px;
}

.budget-input{
  padding:10px;
  background:rgba(255,255,255,.15);
  border:2px solid rgba(255,255,255,.3);
  border-radius:10px;
  color:var(--text-main);
  font-size:1rem;
  font-weight:600;
  flex: 1;
  text-align:center;
  transition:all .3s ease;
}

.budget-input:focus{
  outline:none;
  border-color:var(--budget-blue);
  background:rgba(255,255,255,.25);
  box-shadow:0 0 15px rgba(52,152,219,.3);
}

.set-budget-btn{
  padding:10px 15px;
  background:var(--budget-blue);
  border:none;
  border-radius:10px;
  color:#fff;
  font-weight:600;
  cursor:pointer;
  transition:all .3s ease;
  display:flex;
  align-items:center;
  gap:5px;
  font-size: 0.9rem;
  white-space: nowrap;
}

.set-budget-btn:hover{
  transform:translateY(-1px);
  box-shadow:0 4px 12px rgba(52,152,219,.4);
}

.budget-stats{
  display:grid;
  grid-template-columns:repeat(2, 1fr);
  gap:10px;
}

.budget-stat{
  background:rgba(255,255,255,.1);
  border-radius:12px;
  padding:12px;
  text-align:center;
  border:1px solid rgba(255,255,255,.2);
  transition:all .3s ease;
}

.budget-stat-value{
  font-size:1.2rem;
  font-weight:700;
  display:block;
  margin-bottom:3px;
}

.budget-stat-label{
  font-size:.75rem;
  opacity:.8;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.budget-remaining{ color:var(--success-green); }
.budget-spent{ color:var(--danger-red); }
.budget-total{ color:var(--money-gold); }
.budget-warning{ color:var(--warning-orange); }

/* PROGRESS BAR */
.progress-container{
  background:var(--glass-bg);
  backdrop-filter:blur(10px);
  border:1px solid var(--glass-border);
  border-radius:16px;
  padding:15px;
  margin-bottom:20px;
  box-shadow:var(--shadow-glow);
}

.progress-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
  font-size: 0.9rem;
}

.progress-bar{
  width:100%;
  height:16px;
  background:rgba(255,255,255,.1);
  border-radius:50px;
  overflow:hidden;
  position:relative;
}

.progress-fill{
  height:100%;
  background:linear-gradient(90deg,var(--success-green),#27ae60);
  border-radius:50px;
  transition:width .5s ease;
  display:flex;
  align-items:center;
  justify-content:flex-end;
  padding-right:8px;
  font-size:10px;
  font-weight:700;
  color:#fff;
  text-shadow:0 1px 2px rgba(0,0,0,.3);
}

.progress-stats{
  display:flex;
  justify-content:space-around;
  margin-top:12px;
  padding-top:12px;
  border-top:1px solid rgba(255,255,255,.1);
}

.stat{ text-align:center; }
.stat-value{
  font-size:1.2rem;
  font-weight:700;
  color:var(--pink-light);
  display:block;
}
.stat-label{
  font-size:.7rem;
  opacity:.8;
  text-transform: uppercase;
}

/* ADD ITEM SECTION */
.add-item-section{
  background:var(--glass-bg);
  backdrop-filter:blur(10px);
  border:1px solid var(--glass-border);
  border-radius:16px;
  padding:15px;
  margin-bottom:20px;
  box-shadow:var(--shadow-glow);
}

.add-item-form{
  display:flex;
  flex-direction:column;
  gap:10px;
}

.input-row{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}

.item-input{
  flex:1;
  min-width:100%;
  padding:12px;
  background:rgba(255,255,255,.1);
  border:2px solid rgba(255,255,255,.2);
  border-radius:10px;
  color:var(--text-main);
  font-size:1rem;
  transition:all .3s ease;
}

.item-input:focus{
  outline:none;
  border-color:var(--pink);
  background:rgba(255,255,255,.15);
  box-shadow:0 0 15px rgba(255,79,163,.2);
}

.item-input::placeholder{ color:rgba(255,255,255,.5); }

.category-select{
  flex: 1;
  padding:12px;
  background:rgba(255,255,255,.1);
  border:2px solid rgba(255,255,255,.2);
  border-radius:10px;
  color:var(--text-main);
  font-size:1rem;
  cursor:pointer;
  transition:all .3s ease;
}

.category-select:focus{ outline:none; border-color:var(--pink); }
.category-select option{ background:#2d1b2e; color:#fff; }

.quantity-input{
  width:80px;
  padding:12px;
  background:rgba(255,255,255,.1);
  border:2px solid rgba(255,255,255,.2);
  border-radius:10px;
  color:var(--text-main);
  font-size:1rem;
  text-align:center;
}

.price-input{
  flex: 1;
  min-width: 100px;
  padding:12px;
  background:rgba(241,196,15,.15);
  border:2px solid rgba(241,196,15,.3);
  border-radius:10px;
  color:var(--text-main);
  font-size:1rem;
  text-align:center;
  font-weight:600;
}

.price-input:focus{
  outline:none;
  border-color:var(--money-gold);
  background:rgba(241,196,15,.25);
  box-shadow:0 0 15px rgba(241,196,15,.2);
}

.add-btn{
  width: 100%;
  padding:14px;
  background:linear-gradient(135deg,var(--pink),var(--pink-light));
  border:none;
  border-radius:10px;
  color:#fff;
  font-family:'Orbitron',sans-serif;
  font-size:1rem;
  font-weight:700;
  cursor:pointer;
  transition:all .3s ease;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  margin-top: 5px;
}

.add-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 20px rgba(255,79,163,.5);
}

/* QUICK CATEGORIES */
.quick-categories{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-top:15px;
  overflow-x: auto;
  padding-bottom: 5px;
}

.quick-cat-btn{
  padding:8px 12px;
  background:rgba(255,255,255,.1);
  border:1px solid rgba(255,255,255,.2);
  border-radius:20px;
  color:#fff;
  font-size:.8rem;
  cursor:pointer;
  transition:all .3s ease;
  display:flex;
  align-items:center;
  gap:5px;
  white-space: nowrap;
}

.quick-cat-btn:hover{
  background:var(--pink);
  border-color:var(--pink);
  transform:scale(1.05);
}

/* FILTER TABS */
.filter-tabs{
  display:flex;
  gap:8px;
  margin-bottom:20px;
  overflow-x:auto;
  padding-bottom:5px;
}

.filter-tab{
  padding:8px 16px;
  background:rgba(255,255,255,.1);
  border:2px solid transparent;
  border-radius:25px;
  color:#fff;
  font-size:.9rem;
  cursor:pointer;
  transition:all .3s ease;
  white-space:nowrap;
  font-weight:600;
}

.filter-tab:hover{ background:rgba(255,255,255,.2); }
.filter-tab.active{
  background:var(--pink);
  border-color:var(--pink-light);
  box-shadow:0 4px 15px rgba(255,79,163,.4);
}

/* GROCERY LIST */
.grocery-list{
  display:flex;
  flex-direction:column;
  gap:15px;
}

.category-section{
  background:var(--glass-bg);
  backdrop-filter:blur(10px);
  border:1px solid var(--glass-border);
  border-radius:16px;
  overflow:hidden;
  box-shadow:var(--shadow-glow);
  animation:slideUp .5s ease;
}

@keyframes slideUp{
  from{ opacity:0; transform:translateY(20px); }
  to{ opacity:1; transform:translateY(0); }
}

.category-header{
  padding:15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
  transition:all .3s ease;
  border-bottom:1px solid rgba(255,255,255,.1);
}

.category-header:hover{ background:rgba(255,255,255,.05); }

.category-title{
  display:flex;
  align-items:center;
  gap:10px;
  font-family:'Orbitron',sans-serif;
  font-size:1rem;
  font-weight:700;
}

.category-icon{
  width:32px;
  height:32px;
  border-radius:8px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1rem;
}

.category-count{
  background:rgba(255,255,255,.2);
  padding:4px 10px;
  border-radius:20px;
  font-size:.75rem;
  font-weight:600;
}

.category-toggle{
  transition:transform .3s ease;
  font-size: 0.8rem;
  margin-left: 10px;
}

.category-toggle.collapsed{ transform:rotate(-90deg); }

.category-items{
  padding:10px;
  display:flex;
  flex-direction:column;
  gap:8px;
}

.category-items.collapsed{ display:none; }

/* GROCERY ITEM */
.grocery-item{
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px;
  background:rgba(255,255,255,.05);
  border-radius:12px;
  transition:all .3s ease;
  animation:fadeIn .3s ease;
  position:relative;
  overflow:hidden;
  border: 1px solid transparent;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateX(-10px)}
  to{opacity:1;transform:translateX(0)}
}

.grocery-item:hover{
  background:rgba(255,255,255,.1);
  transform:translateX(3px);
  border-color: rgba(255,255,255,0.1);
}

.grocery-item.checked{
  opacity:.7;
  background:rgba(46,204,113,.1);
  border-left: 4px solid var(--success-green);
}

.grocery-item.checked .item-name{
  text-decoration:line-through;
  opacity:.7;
}

/* Custom Checkbox */
.checkbox-wrapper{
  position:relative;
  width:24px;
  height:24px;
  flex-shrink: 0;
}

.item-checkbox{
  width:24px;
  height:24px;
  opacity:0;
  cursor:pointer;
  z-index:2;
  position:absolute;
}

.checkmark{
  position:absolute;
  top:0;left:0;
  width:24px;
  height:24px;
  background:rgba(255,255,255,.1);
  border:2px solid rgba(255,255,255,.3);
  border-radius:6px;
  transition:all .3s ease;
  display:flex;
  align-items:center;
  justify-content:center;
  color:transparent;
}

.item-checkbox:checked ~ .checkmark{
  background:var(--success-green);
  border-color:var(--success-green);
  color:#fff;
}

.item-content{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:4px;
  min-width: 0; /* Fix for text overflow */
}

.item-name{
  font-size:1rem;
  font-weight:600;
  transition:all .3s ease;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.item-meta{
  display:flex;
  gap:8px;
  font-size:.75rem;
  opacity:.8;
  flex-wrap:wrap;
  align-items:center;
}

.item-quantity{
  display:flex;
  align-items:center;
  gap:4px;
  background:rgba(255,255,255,.1);
  padding:3px 8px;
  border-radius:20px;
}

.item-price{
  display:flex;
  align-items:center;
  gap:4px;
  background:rgba(241,196,15,.2);
  padding:3px 8px;
  border-radius:20px;
  color:var(--money-gold);
  font-weight:600;
}

.item-total{
  display:flex;
  align-items:center;
  gap:4px;
  background:rgba(52,152,219,.2);
  padding:3px 8px;
  border-radius:20px;
  color:var(--budget-blue);
  font-weight:600;
}

.item-actions{
  display:flex;
  gap:5px;
  opacity:1; /* Always visible on mobile for usability */
}

.item-btn{
  width:32px;
  height:32px;
  border-radius:8px;
  border:none;
  background:rgba(255,255,255,.1);
  color:#fff;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:all .3s ease;
  font-size:12px;
}

.item-btn:hover{ transform:scale(1.1); }
.item-btn.edit:hover{ background:#3498db; }
.item-btn.delete:hover{ background:var(--danger-red); }

/* EMPTY STATE */
.empty-state{
  text-align:center;
  padding:40px 20px;
  background:var(--glass-bg);
  backdrop-filter:blur(10px);
  border-radius:16px;
  border:2px dashed rgba(255,255,255,.2);
}

.empty-state i{
  font-size:48px;
  margin-bottom:15px;
  opacity:.5;
}

.empty-state h3{
  font-family:'Orbitron',sans-serif;
  font-size:1.2rem;
  margin-bottom:8px;
}

.empty-state p{
  opacity:.8;
  font-size: 0.9rem;
}

/* BULK ACTIONS */
.bulk-actions{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%) translateY(100px);
  background:rgba(0,0,0,.9);
  backdrop-filter:blur(10px);
  padding:12px 20px;
  border-radius:50px;
  display:flex;
  gap:10px;
  align-items:center;
  box-shadow:0 10px 30px rgba(0,0,0,.5);
  border:1px solid var(--pink);
  transition:transform .3s ease;
  z-index:100;
  width: 90%;
  max-width: 400px;
  justify-content: center;
}

.bulk-actions.show{
  transform:translateX(-50%) translateY(0);
}

.bulk-btn{
  padding:10px 16px;
  border-radius:25px;
  border:none;
  font-size:.8rem;
  font-weight:600;
  cursor:pointer;
  transition:all .3s ease;
  display:flex;
  align-items:center;
  gap:6px;
}

.bulk-btn.clear{ background:var(--danger-red); color:#fff; }
.bulk-btn.uncheck{ background:var(--warning-orange); color:#fff; }
.bulk-btn:hover{ transform:scale(1.05); }

.selected-count{
  color:#fff;
  font-weight:700;
  margin-right:5px;
  font-size: 0.85rem;
}

/* EDIT MODAL */
.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.8);
  backdrop-filter:blur(5px);
  z-index:2000;
  align-items:center;
  justify-content:center;
  padding:20px;
}

.modal.active{ display:flex; }

.modal-content{
  background:linear-gradient(135deg,rgba(255,79,163,.95),rgba(255,123,191,.95));
  backdrop-filter:blur(20px);
  border-radius:20px;
  padding:25px;
  width:100%;
  max-width:400px;
  border:1px solid rgba(255,255,255,.3);
  box-shadow:0 25px 50px rgba(0,0,0,.3);
  animation:popIn .3s ease;
}

@keyframes popIn{
  from{opacity:0;transform:scale(.9)}
  to{opacity:1;transform:scale(1)}
}

.modal-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}

.modal-header h2{
  font-family:'Orbitron',sans-serif;
  font-size:1.2rem;
}

.close-modal{
  width:36px;
  height:36px;
  border-radius:50%;
  background:rgba(255,255,255,.2);
  border:none;
  color:#fff;
  font-size:18px;
  cursor:pointer;
  transition:all .3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.close-modal:hover{
  background:rgba(255,255,255,.3);
  transform:rotate(90deg);
}

.form-group{ margin-bottom:15px; }
.form-group label{
  display:block;
  margin-bottom:6px;
  font-weight:600;
  font-size:.85rem;
}

.form-group input,
.form-group select{
  width:100%;
  padding:12px;
  background:rgba(255,255,255,.15);
  border:2px solid rgba(255,255,255,.2);
  border-radius:10px;
  color:#fff;
  font-size:1rem;
  transition:all .3s ease;
}

.form-group input:focus,
.form-group select:focus{
  outline:none;
  border-color:#fff;
  background:rgba(255,255,255,.25);
}

.form-actions{
  display:flex;
  gap:10px;
  margin-top:20px;
}

.save-btn, .cancel-btn{
  flex:1;
  padding:12px;
  border:none;
  border-radius:10px;
  font-family:'Orbitron',sans-serif;
  font-size:0.9rem;
  font-weight:700;
  cursor:pointer;
  transition:all .3s ease;
}

.save-btn{
  background:#fff;
  color:var(--pink);
}

.save-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 10px 30px rgba(0,0,0,.2);
}

.cancel-btn{
  background:rgba(255,255,255,.2);
  color:#fff;
}

.cancel-btn:hover{ background:rgba(255,255,255,.3); }

/* TOAST */
.toast{
  position:fixed;
  top:80px;
  left:50%;
  transform:translateX(-50%) translateY(-100px);
  background:rgba(0,0,0,.9);
  color:#fff;
  padding:12px 20px;
  border-radius:10px;
  display:flex;
  align-items:center;
  gap:10px;
  opacity:0;
  transition:all .3s ease;
  z-index:3000;
  border:1px solid var(--pink);
  font-size: 0.9rem;
  width: 90%;
  max-width: 300px;
  justify-content: center;
}

.toast.show{
  opacity:1;
  transform:translateX(-50%) translateY(0);
}

.toast i{ color:var(--success-green); }

/* FOOTER */
footer{
  text-align:center;
  padding:20px;
  opacity:.7;
  font-size:.8rem;
  margin-top:30px;
}

/* Category Colors */
.cat-produce{--cat-color:#ff6b6b}
.cat-dairy{--cat-color:#4ecdc4}
.cat-meat{--cat-color:#ff6b6b}
.cat-pantry{--cat-color:#ffeaa7}
.cat-frozen{--cat-color:#74b9ff}
.cat-beverages{--cat-color:#a29bfe}
.cat-household{--cat-color:#fd79a8}
.cat-personal{--cat-color:#00b894}
.cat-other{--cat-color:#dfe6e9}

.category-icon{
  background:var(--cat-color,rgba(255,255,255,.2));
  color:#fff;
}

/* RESPONSIVE DESKTOP ENHANCEMENTS */
@media(min-width:768px){
  body { padding-bottom: 100px; }
  main { padding: 40px 20px; }
  
  .header-left img { height: 46px; }
  .motto { font-size: 18px; }
  .motto i { font-size: 17px; }
  
  .budget-stats { grid-template-columns: repeat(4, 1fr); }
  .budget-stat-value { font-size: 1.4rem; }
  
  .input-row { flex-wrap: nowrap; }
  .item-input { min-width: 0; }
  .category-select { min-width: 150px; }
  .quantity-input { width: 100px; }
  .price-input { width: 120px; min-width: 0; }
  
  .add-btn { width: auto; padding: 14px 28px; margin-top: 0; }
  
  .grocery-item { padding: 15px; }
  .item-actions { opacity: 0; }
  .grocery-item:hover .item-actions { opacity: 1; }
  
  .modal-content { padding: 30px; }
  .modal-header h2 { font-size: 1.4rem; }
}

/* Small Mobile Tweaks */
@media(max-width:380px){
  .budget-title { font-size: 1rem; }
  .quick-cat-btn { font-size: 0.75rem; padding: 6px 10px; }
  .category-title { font-size: 0.9rem; }
  .item-name { font-size: 0.9rem; }
  .item-meta { font-size: 0.7rem; }
}
</style>
</head>

<body>

<!-- AUDIO -->
<audio id="bgMusic" src="coffee.mp3" loop></audio>
<!-- Notification Sound -->
<audio id="notifSound" src="data:audio/mp3;base64,SUQzBAAAAAABAFRYWFgAAAASAAADbWFqb3JfYnJhbmQAbXA0MgBUWFhYAAAAEQAAA21pbm9yX3ZlcnNpb24AMABUWFhYAAAAHAAAA2NvbXBhdGlibGVfYnJhbmRzAGlzb21tcDQyAFRTU0UAAAAPAAADTGF2ZjU3LjU2LjEwMAAAAAAAAAAAAAAA//uQZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWgAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQZAAABt4XWIMYQAAAAANIAAAAExhdmlhbmQgY2hvcmQgb3JjYXN0cmEAA//uQZAAABpIXV2GQQAAAAANIAAAAQ29weXJpZ2h0IDIwMDUsIFNhbWFzaG5hIEF1ZGlv" preload="auto"></audio>

<!-- LOADER -->
<div id="loader">
  <div class="loader-content">
    <img src="adminlogo.png" alt="Logo">
    <div class="arc-spinner"></div>
  </div>
</div>

<header>
  <div class="header-left">
    <a href="homepage.html"><img src="adminlogo.png" alt="Logo"></a>
    <div class="motto" id="motto"></div>
  </div>

  <div class="header-icons">
    <a href="homepage.html" title="Home" id="homeBtn">
      <i class="fas fa-home"></i>
      <span class="notification-badge" id="notifBadge"></span>
    </a>
    <a id="musicToggle" title="Toggle Music">
      <i class="fas fa-music"></i>
    </a>
  </div>
</header>

<main>
  <div class="page-header">
    <h1><i class="fas fa-shopping-basket"></i> Grocery List</h1>
    <p>Plan your shopping, track your budget, check items off as you go</p>
  </div>

  <!-- Budget Section -->
  <div class="budget-section">
    <div class="budget-header">
      <div class="budget-title">
        <i class="fas fa-wallet"></i> Budget Tracker
      </div>
    </div>
    <div class="budget-input-group">
      <span style="font-weight: bold;">‚Ç±</span>
      <input type="number" class="budget-input" id="budgetInput" placeholder="0.00" step="0.01" min="0">
      <button class="set-budget-btn" onclick="setBudget()">
        <i class="fas fa-save"></i> <span>Set</span>
      </button>
    </div>
    <div class="budget-stats" style="margin-top: 15px;">
      <div class="budget-stat">
        <span class="budget-stat-value budget-total" id="budgetTotal">‚Ç±0.00</span>
        <span class="budget-stat-label">Total Budget</span>
      </div>
      <div class="budget-stat">
        <span class="budget-stat-value budget-spent" id="budgetSpent">‚Ç±0.00</span>
        <span class="budget-stat-label">Total Spent</span>
      </div>
      <div class="budget-stat">
        <span class="budget-stat-value budget-remaining" id="budgetRemaining">‚Ç±0.00</span>
        <span class="budget-stat-label">Remaining</span>
      </div>
      <div class="budget-stat">
        <span class="budget-stat-value" id="checkedSpent" style="color:var(--money-gold);">‚Ç±0.00</span>
        <span class="budget-stat-label">Checked</span>
      </div>
    </div>
  </div>

  <!-- Progress Bar -->
  <div class="progress-container">
    <div class="progress-header">
      <span>Shopping Progress</span>
      <span id="progressPercent">0%</span>
    </div>
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill" style="width:0%">0%</div>
    </div>
    <div class="progress-stats">
      <div class="stat">
        <span class="stat-value" id="totalItems">0</span>
        <span class="stat-label">Total</span>
      </div>
      <div class="stat">
        <span class="stat-value" id="checkedItems">0</span>
        <span class="stat-label">Checked</span>
      </div>
      <div class="stat">
        <span class="stat-value" id="remainingItems">0</span>
        <span class="stat-label">Left</span>
      </div>
    </div>
  </div>

  <!-- Add Item Section -->
  <div class="add-item-section">
    <form class="add-item-form" id="addItemForm">
      <div class="input-row">
        <input type="text" class="item-input" id="itemName" placeholder="What do you need to buy?" required autocomplete="off">
      </div>
      <div class="input-row">
        <select class="category-select" id="itemCategory">
          <option value="produce">ü•¨ Produce</option>
          <option value="dairy">ü•õ Dairy</option>
          <option value="meat">ü•© Meat</option>
          <option value="pantry">üçû Pantry</option>
          <option value="frozen">‚ùÑÔ∏è Frozen</option>
          <option value="beverages">ü•§ Drinks</option>
          <option value="household">üè† Home</option>
          <option value="personal">‚ú® Care</option>
          <option value="other">üì¶ Misc</option>
        </select>
        <input type="text" class="quantity-input" id="itemQuantity" placeholder="Qty" value="1">
        <input type="number" class="price-input" id="itemPrice" placeholder="‚Ç± Price" step="0.01" min="0">
      </div>
      <div class="input-row">
        <button type="submit" class="add-btn">
          <i class="fas fa-plus"></i> Add to List
        </button>
      </div>
    </form>
    <div class="quick-categories">
      <button class="quick-cat-btn" onclick="quickAdd('Apples','produce','1 kg', 50)">
        <i class="fas fa-apple-alt"></i> Apples
      </button>
      <button class="quick-cat-btn" onclick="quickAdd('Milk','dairy','1 L', 90)">
        <i class="fas fa-glass-whiskey"></i> Milk
      </button>
      <button class="quick-cat-btn" onclick="quickAdd('Bread','pantry','1 loaf', 60)">
        <i class="fas fa-bread-slice"></i> Bread
      </button>
      <button class="quick-cat-btn" onclick="quickAdd('Eggs','dairy','12 pcs', 120)">
        <i class="fas fa-egg"></i> Eggs
      </button>
      <button class="quick-cat-btn" onclick="quickAdd('Rice','pantry','5 kg', 250)">
        <i class="fas fa-seedling"></i> Rice
      </button>
    </div>
  </div>

  <!-- Filter Tabs -->
  <div class="filter-tabs">
    <button class="filter-tab active" onclick="filterItems('all')">All Items</button>
    <button class="filter-tab" onclick="filterItems('active')">Active</button>
    <button class="filter-tab" onclick="filterItems('completed')">Completed</button>
  </div>

  <!-- Grocery List -->
  <div class="grocery-list" id="groceryList">
    <!-- Categories will be populated here -->
  </div>

  <!-- Empty State -->
  <div class="empty-state" id="emptyState" style="display:none;">
    <i class="fas fa-shopping-cart"></i>
    <h3>Your list is empty</h3>
    <p>Add some items to get started!</p>
  </div>
</main>

<!-- Bulk Actions -->
<div class="bulk-actions" id="bulkActions">
  <span class="selected-count" id="selectedCount">0 items</span>
  <button class="bulk-btn uncheck" onclick="uncheckAll()">
    <i class="fas fa-undo"></i> Reset
  </button>
  <button class="bulk-btn clear" onclick="clearCompleted()">
    <i class="fas fa-trash"></i> Clear
  </button>
</div>

<!-- Edit Modal -->
<div class="modal" id="editModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2><i class="fas fa-edit"></i> Edit Item</h2>
      <button class="close-modal" onclick="closeEditModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <form id="editForm">
      <input type="hidden" id="editId">
      <div class="form-group">
        <label>Item Name</label>
        <input type="text" id="editName" required>
      </div>
      <div class="form-group">
        <label>Category</label>
        <select id="editCategory">
          <option value="produce">ü•¨ Produce</option>
          <option value="dairy">ü•õ Dairy</option>
          <option value="meat">ü•© Meat</option>
          <option value="pantry">üçû Pantry</option>
          <option value="frozen">‚ùÑÔ∏è Frozen</option>
          <option value="beverages">ü•§ Drinks</option>
          <option value="household">üè† Home</option>
          <option value="personal">‚ú® Care</option>
          <option value="other">üì¶ Misc</option>
        </select>
      </div>
      <div class="form-group">
        <label>Quantity</label>
        <input type="text" id="editQuantity">
      </div>
      <div class="form-group">
        <label>Price (‚Ç±)</label>
        <input type="number" id="editPrice" step="0.01" min="0">
      </div>
      <div class="form-actions">
        <button type="button" class="cancel-btn" onclick="closeEditModal()">Cancel</button>
        <button type="submit" class="save-btn">Save</button>
      </div>
    </form>
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast">
  <i class="fas fa-check-circle"></i>
  <span id="toastMessage">Item added!</span>
</div>

<footer>
  <p>&copy; 2024 Manager Julie. Smart Grocery List. <i class="fas fa-heart" style="color:var(--pink)"></i></p>
</footer>

<script>
// --- DATA & STATE ---
let groceryItems = [];
let budget = 0;
let currentFilter = 'all';

// Category Config
const categories = {
  produce: { name: 'Produce', icon: 'fa-carrot', color: '#ff6b6b' },
  dairy: { name: 'Dairy & Eggs', icon: 'fa-cheese', color: '#4ecdc4' },
  meat: { name: 'Meat & Seafood', icon: 'fa-drumstick-bite', color: '#ff6b6b' },
  pantry: { name: 'Pantry', icon: 'fa-box', color: '#ffeaa7' },
  frozen: { name: 'Frozen Foods', icon: 'fa-snowflake', color: '#74b9ff' },
  beverages: { name: 'Beverages', icon: 'fa-wine-bottle', color: '#a29bfe' },
  household: { name: 'Household', icon: 'fa-home', color: '#fd79a8' },
  personal: { name: 'Personal Care', icon: 'fa-pump-soap', color: '#00b894' },
  other: { name: 'Other', icon: 'fa-box-open', color: '#dfe6e9' }
};

// --- INITIALIZATION ---
window.addEventListener("load", () => {
  // Load Data
  const storedItems = localStorage.getItem('julieGroceryList');
  const storedBudget = localStorage.getItem('julieGroceryBudget');
  
  if (storedItems) groceryItems = JSON.parse(storedItems);
  if (storedBudget) budget = parseFloat(storedBudget);

  // UI Init
  setTimeout(() => document.getElementById('loader').classList.add("fade-out"), 500);
  
  document.getElementById('budgetInput').value = budget > 0 ? budget : '';
  
  // Motto
  const titles = [
    ['fas fa-bolt','Kaya mo yan Julie!'],
    ['fas fa-crown','You are a Queen JULIE'],
    ['fas fa-money-bill','Yayaman ka Julie'],
    ['fas fa-heart','I Love you Julie']
  ];
  const t = titles[Math.floor(Math.random() * titles.length)];
  document.getElementById('motto').innerHTML = `<i class="${t[0]}"></i>${t[1]}`;

  // Initial Render
  updateBudget();
  renderList();
  updateNotificationBadge();
});

// --- MUSIC ---
let musicOn = false;
document.getElementById('musicToggle').onclick = () => {
  musicOn = !musicOn;
  const audio = document.getElementById('bgMusic');
  musicOn ? audio.play() : audio.pause();
  document.getElementById('musicToggle').style.background = musicOn ? 'rgba(255,255,255,.3)' : '';
}

// --- NOTIFICATION SOUND ---
function playNotificationSound() {
  const sound = document.getElementById('notifSound');
  sound.currentTime = 0;
  sound.play().catch(e => console.log("Audio play failed (user interaction needed first)"));
}

// --- NOTIFICATION BADGE ---
function updateNotificationBadge() {
  const uncheckedCount = groceryItems.filter(item => !item.checked).length;
  const badge = document.getElementById('notifBadge');
  
  if (uncheckedCount > 0) {
    badge.style.display = 'block';
  } else {
    badge.style.display = 'none';
  }
}

// --- BUDGET FUNCTIONS ---
function setBudget() {
  const input = document.getElementById('budgetInput');
  const value = parseFloat(input.value);
  if (isNaN(value) || value < 0) {
    showToast('Please enter a valid budget amount!');
    return;
  }
  budget = value;
  localStorage.setItem('julieGroceryBudget', budget);
  updateBudget();
  showToast(`Budget set to ‚Ç±${budget.toFixed(2)}`);
}

function updateBudget() {
  const totalSpent = groceryItems.reduce((sum, item) => sum + (parseFloat(item.price) || 0), 0);
  const checkedSpent = groceryItems
    .filter(item => item.checked)
    .reduce((sum, item) => sum + (parseFloat(item.price) || 0), 0);
  const remaining = budget - totalSpent;
  
  document.getElementById('budgetTotal').textContent = `‚Ç±${budget.toFixed(2)}`;
  document.getElementById('budgetSpent').textContent = `‚Ç±${totalSpent.toFixed(2)}`;
  document.getElementById('checkedSpent').textContent = `‚Ç±${checkedSpent.toFixed(2)}`;
  
  const remainingEl = document.getElementById('budgetRemaining');
  remainingEl.textContent = `‚Ç±${remaining.toFixed(2)}`;
  
  if (remaining < 0) remainingEl.style.color = 'var(--danger-red)';
  else if (remaining < budget * 0.2) remainingEl.style.color = 'var(--warning-orange)';
  else remainingEl.style.color = 'var(--success-green)';
}

// --- CORE FUNCTIONS ---

function saveData() {
  localStorage.setItem('julieGroceryList', JSON.stringify(groceryItems));
  updateProgress();
  updateBudget();
  updateNotificationBadge(); // Update badge on every data change
}

// Add Item
document.getElementById('addItemForm').addEventListener('submit', (e) => {
  e.preventDefault();
  
  const name = document.getElementById('itemName').value.trim();
  const category = document.getElementById('itemCategory').value;
  const quantity = document.getElementById('itemQuantity').value.trim() || '1';
  const price = parseFloat(document.getElementById('itemPrice').value) || 0;
  
  if (!name) return;
  
  const item = {
    id: Date.now().toString(),
    name,
    category,
    quantity,
    price: price,
    checked: false,
    createdAt: new Date().toISOString()
  };
  
  groceryItems.push(item);
  saveData();
  renderList();
  
  // Reset form
  document.getElementById('itemName').value = '';
  document.getElementById('itemQuantity').value = '1';
  document.getElementById('itemPrice').value = '';
  document.getElementById('itemName').focus();
  
  showToast('Item added!');
});

// Quick Add
function quickAdd(name, category, quantity, price) {
  document.getElementById('itemName').value = name;
  document.getElementById('itemCategory').value = category;
  document.getElementById('itemQuantity').value = quantity;
  document.getElementById('itemPrice').value = price || '';
  document.getElementById('addItemForm').dispatchEvent(new Event('submit'));
}

// Toggle Check
function toggleCheck(id) {
  const item = groceryItems.find(i => i.id === id);
  if (item) {
    item.checked = !item.checked;
    saveData();
    renderList();
    
    if (item.checked) {
      playNotificationSound(); // Play sound on check
      showToast(`Checked! ‚Ç±${(parseFloat(item.price) || 0).toFixed(2)}`);
    }
  }
}

// Delete
function deleteItem(id) {
  if (confirm('Delete this item?')) {
    groceryItems = groceryItems.filter(i => i.id !== id);
    saveData();
    renderList();
    showToast('Item deleted');
  }
}

// --- EDIT MODAL ---
let editingId = null;

function editItem(id) {
  const item = groceryItems.find(i => i.id === id);
  if (!item) return;
  
  editingId = id;
  document.getElementById('editId').value = id;
  document.getElementById('editName').value = item.name;
  document.getElementById('editCategory').value = item.category;
  document.getElementById('editQuantity').value = item.quantity;
  document.getElementById('editPrice').value = item.price || '';
  
  document.getElementById('editModal').classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeEditModal() {
  document.getElementById('editModal').classList.remove('active');
  document.body.style.overflow = '';
  editingId = null;
}

document.getElementById('editForm').addEventListener('submit', (e) => {
  e.preventDefault();
  if (!editingId) return;
  
  const item = groceryItems.find(i => i.id === editingId);
  if (item) {
    item.name = document.getElementById('editName').value.trim();
    item.category = document.getElementById('editCategory').value;
    item.quantity = document.getElementById('editQuantity').value.trim() || '1';
    item.price = parseFloat(document.getElementById('editPrice').value) || 0;
    
    saveData();
    renderList();
    closeEditModal();
    showToast('Item updated!');
  }
});

// --- FILTER ---
function filterItems(filter) {
  currentFilter = filter;
  
  document.querySelectorAll('.filter-tab').forEach(tab => {
    tab.classList.remove('active');
    // Simple text matching logic for demo
    if ((filter === 'all' && tab.innerText.includes('All')) || 
        (filter === 'active' && tab.innerText.includes('Active')) ||
        (filter === 'completed' && tab.innerText.includes('Completed'))) {
      tab.classList.add('active');
    }
  });
  
  renderList();
}

// --- BULK ACTIONS ---
function uncheckAll() {
  groceryItems.forEach(item => item.checked = false);
  saveData();
  renderList();
  showToast('All items reset');
}

function clearCompleted() {
  const completedCount = groceryItems.filter(i => i.checked).length;
  if (completedCount === 0) {
    showToast('No completed items');
    return;
  }
  
  if (confirm(`Clear ${completedCount} completed items?`)) {
    groceryItems = groceryItems.filter(i => !i.checked);
    saveData();
    renderList();
    showToast('Completed items cleared!');
  }
}

// --- PROGRESS & STATS ---
function updateProgress() {
  const total = groceryItems.length;
  const checked = groceryItems.filter(i => i.checked).length;
  const remaining = total - checked;
  const percent = total === 0 ? 0 : Math.round((checked / total) * 100);
  
  document.getElementById('totalItems').textContent = total;
  document.getElementById('checkedItems').textContent = checked;
  document.getElementById('remainingItems').textContent = remaining;
  document.getElementById('progressPercent').textContent = percent + '%';
  
  const fill = document.getElementById('progressFill');
  fill.style.width = percent + '%';
  fill.textContent = percent > 15 ? percent + '%' : '';
  
  // Bulk Actions visibility
  const bulkActions = document.getElementById('bulkActions');
  const selectedCount = document.getElementById('selectedCount');
  
  if (checked > 0) {
    bulkActions.classList.add('show');
    selectedCount.textContent = `${checked} checked`;
  } else {
    bulkActions.classList.remove('show');
  }
}

// --- RENDER LIST ---
function renderList() {
  const listContainer = document.getElementById('groceryList');
  const emptyState = document.getElementById('emptyState');
  
  // Filter
  let itemsToShow = groceryItems;
  if (currentFilter === 'active') itemsToShow = groceryItems.filter(i => !i.checked);
  if (currentFilter === 'completed') itemsToShow = groceryItems.filter(i => i.checked);
  
  // Group by category
  const grouped = {};
  itemsToShow.forEach(item => {
    if (!grouped[item.category]) grouped[item.category] = [];
    grouped[item.category].push(item);
  });
  
  // Sort categories
  const sortedCategories = Object.keys(grouped).sort((a, b) => {
    const order = Object.keys(categories);
    return order.indexOf(a) - order.indexOf(b);
  });
  
  if (sortedCategories.length === 0) {
    listContainer.innerHTML = '';
    emptyState.style.display = 'block';
    updateProgress();
    return;
  }
  
  emptyState.style.display = 'none';
  listContainer.innerHTML = '';
  
  sortedCategories.forEach((catKey, index) => {
    const catItems = grouped[catKey];
    const cat = categories[catKey];
    
    const section = document.createElement('div');
    section.className = 'category-section';
    section.style.animationDelay = (index * 0.1) + 's';
    
    const checkedCount = catItems.filter(i => i.checked).length;
    const isComplete = checkedCount === catItems.length && catItems.length > 0;
    const categoryTotal = catItems.reduce((sum, item) => sum + (parseFloat(item.price) || 0), 0);
    
    section.innerHTML = `
      <div class="category-header" onclick="toggleCategory('${catKey}')">
        <div class="category-title">
          <div class="category-icon" style="background:${cat.color}">
            <i class="fas ${cat.icon}"></i>
          </div>
          <span>${cat.name}</span>
          ${isComplete ? '<i class="fas fa-check-circle" style="color:var(--success-green);margin-left:8px;font-size:0.9rem;"></i>' : ''}
        </div>
        <div style="display:flex;align-items:center;">
          <span class="category-count">${checkedCount}/${catItems.length} ‚Ä¢ ‚Ç±${categoryTotal.toFixed(2)}</span>
          <i class="fas fa-chevron-down category-toggle" id="toggle-${catKey}"></i>
        </div>
      </div>
      <div class="category-items" id="items-${catKey}">
        ${catItems.map(item => {
          const itemPrice = parseFloat(item.price) || 0;
          return `
          <div class="grocery-item ${item.checked ? 'checked' : ''}" data-id="${item.id}">
            <div class="checkbox-wrapper">
              <input type="checkbox" class="item-checkbox" 
                     ${item.checked ? 'checked' : ''} 
                     onchange="toggleCheck('${item.id}')">
              <div class="checkmark">
                <i class="fas fa-check" style="font-size:12px;"></i>
              </div>
            </div>
            <div class="item-content">
              <div class="item-name">${escapeHtml(item.name)}</div>
              <div class="item-meta">
                <span class="item-quantity">
                  <i class="fas fa-balance-scale"></i> ${escapeHtml(item.quantity)}
                </span>
                ${itemPrice > 0 ? `
                <span class="item-price">
                  <i class="fas fa-tag"></i> ‚Ç±${itemPrice.toFixed(2)}
                </span>
                ` : ''}
              </div>
            </div>
            <div class="item-actions">
              <button class="item-btn edit" onclick="event.stopPropagation();editItem('${item.id}')" title="Edit">
                <i class="fas fa-pen"></i>
              </button>
              <button class="item-btn delete" onclick="event.stopPropagation();deleteItem('${item.id}')" title="Delete">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        `}).join('')}
      </div>
    `;
    
    listContainer.appendChild(section);
  });
  
  updateProgress();
}

// Toggle Category Collapse
function toggleCategory(catKey) {
  const items = document.getElementById(`items-${catKey}`);
  const toggle = document.getElementById(`toggle-${catKey}`);
  
  items.classList.toggle('collapsed');
  toggle.classList.toggle('collapsed');
}

// Utilities
function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

function showToast(message) {
  const toast = document.getElementById('toast');
  document.getElementById('toastMessage').textContent = message;
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 2500);
}

// Close modal on outside click
document.getElementById('editModal').addEventListener('click', (e) => {
  if (e.target === document.getElementById('editModal')) {
    closeEditModal();
  }
});

// Initial calls
updateProgress();
updateBudget();
</script>

</body>
</html>